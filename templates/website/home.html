{% extends 'website/base.html' %}
{% load static %}

{% block title %}Home - Equacare LLC | Professional Home Care Services{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/home-contact.css' %}">
{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero" style="background-image: url('{% static 'images/hero-bg.webp' %}');">
    <div class="hero-overlay"></div>
    <div class="container">
        <div class="hero-content">
            <h1 class="hero-title">A Little Help Goes a Long Way</h1>
            <p class="hero-subtitle">We understand, and we are here to help with reliability, professionalism, and kindness. Our trained caregivers provide support with activities of daily living to ensure your comfort, convenience, health, and safety.</p>
            <div class="hero-buttons">
                <a href="tel:+15155081556" class="btn btn-primary btn-lg"><i class="fas fa-phone"></i> Call Now: (515) 508-1556</a>
                <a href="{% url 'website:contact' %}" class="btn btn-secondary btn-lg">Request Free Consultation</a>
            </div>
        </div>
    </div>
    <div class="hero-scroll">
        <i class="fas fa-chevron-down"></i>
    </div>
</section>

<!-- Features Section -->
<section class="features">
    <div class="container">
        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-user-nurse"></i>
                </div>
                <h3>Qualified Caregivers</h3>
                <p>Experienced, trained, and background-checked professionals</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-clock"></i>
                </div>
                <h3>24/7 Availability</h3>
                <p>Round-the-clock care and support when you need it most</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-heart"></i>
                </div>
                <h3>Personalized Care</h3>
                <p>Customized care plans designed for individual needs</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-shield-alt"></i>
                </div>
                <h3>Licensed & Insured</h3>
                <p>Fully licensed, bonded, and insured for your peace of mind</p>
            </div>
        </div>
    </div>
</section>

<!-- About Preview Section -->
<section class="about-preview">
    <div class="container">
        <div class="about-preview-grid">
            <div class="about-preview-image">
                <img src="{% static 'images/about-preview.webp' %}" alt="Caregiver with senior">
            </div>
            <div class="about-preview-content">
                <span class="section-label">About Equacare</span>
                <h2>There When You Need Us</h2>
                <p>Whether you need in-home support a few hours per week or multiple hours every day, we can help. Whether you want in-home care services for a week or from now on, we'll be at your side.</p>
                <p>We serve you on the schedule that fits your needs, with caregivers who fit both your skills needs and your personality. We take every measure to ensure that home care is a fully satisfying experience for everyone involved. It all starts with a conversation.</p>
                <ul class="check-list">
                    <li><i class="fas fa-check-circle"></i> Personalized care plans</li>
                    <li><i class="fas fa-check-circle"></i> Background-checked caregivers</li>
                    <li><i class="fas fa-check-circle"></i> Flexible scheduling options</li>
                    <li><i class="fas fa-check-circle"></i> Ongoing supervision and support</li>
                </ul>
                <a href="{% url 'website:about' %}" class="btn btn-primary">Learn More About Us</a>
            </div>
        </div>
    </div>
</section>

<!-- Services Section -->
<section class="services">
    <div class="container">
        <div class="section-header">
            <span class="section-label">Our Services</span>
            <h2>How We Can Help</h2>
            <p>From a few hours a week to around-the-clock care, we're here with a helping hand</p>
        </div>
        <div class="services-grid">
            {% if services %}
                {% for service in services %}
                <div class="service-card">
                    <div class="service-icon">
                        <i class="{{ service.icon }}"></i>
                    </div>
                    <h3>{{ service.title }}</h3>
                    <p>{{ service.description }}</p>
                </div>
                {% endfor %}
            {% else %}
                <div class="service-card">
                    <div class="service-icon">
                        <i class="fas fa-home"></i>
                    </div>
                    <h3>Homemaking</h3>
                    <p>Meal preparation, cleaning, laundry</p>
                </div>
                <div class="service-card">
                    <div class="service-icon">
                        <i class="fas fa-hands-helping"></i>
                    </div>
                    <h3>Aide Services</h3>
                    <p>Medication reminders, health monitoring, bathing assistance</p>
                </div>
                <div class="service-card">
                    <div class="service-icon">
                        <i class="fas fa-user-friends"></i>
                    </div>
                    <h3>Companionship</h3>
                    <p>Running errands, playing games, hobbies, and more</p>
                </div>
                <div class="service-card">
                    <div class="service-icon">
                        <i class="fas fa-calendar-check"></i>
                    </div>
                    <h3>Long Term</h3>
                    <p>As long as you need us, we'll be there to help</p>
                </div>
                <div class="service-card">
                    <div class="service-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <h3>Short Term</h3>
                    <p>A few hours a day, or a few hours a week, we'll be there with a helping hand</p>
                </div>
            {% endif %}
        </div>
        <div class="text-center" style="margin-top: 3rem;">
            <a href="{% url 'website:services' %}" class="btn btn-primary">View All Services</a>
        </div>
    </div>
</section>

<!-- Testimonials Section -->
<section class="testimonials">
    <div class="container">
        <div class="section-header">
            <span class="section-label">Testimonials</span>
            <h2>What Families Say About Us</h2>
            <p>Don't just take our word for it - hear from the families we've had the privilege to serve</p>
        </div>
        <div class="testimonials-grid">
            {% if testimonials %}
                {% for testimonial in testimonials %}
                <div class="testimonial-card">
                    <div class="rating">
                        {% for i in "12345" %}
                            {% if forloop.counter <= testimonial.rating %}
                                <i class="fas fa-star"></i>
                            {% else %}
                                <i class="far fa-star"></i>
                            {% endif %}
                        {% endfor %}
                    </div>
                    <p class="testimonial-text">"{{ testimonial.testimonial }}"</p>
                    <div class="testimonial-author">
                        <div class="author-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div>
                            <h4>{{ testimonial.client_name }}</h4>
                            <span>{{ testimonial.relationship }}</span>
                        </div>
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <div class="testimonial-card">
                    <div class="rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                    <p class="testimonial-text">"Equacare has been a blessing for our family. The caregivers are professional, caring, and truly dedicated to my mother's well-being. We couldn't be happier with the service."</p>
                    <div class="testimonial-author">
                        <div class="author-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div>
                            <h4>Sarah Johnson</h4>
                            <span>Daughter of Client</span>
                        </div>
                    </div>
                </div>
                <div class="testimonial-card">
                    <div class="rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                    <p class="testimonial-text">"The level of care and attention my father receives is outstanding. The caregivers treat him with respect and dignity. Thank you, Equacare, for giving us peace of mind."</p>
                    <div class="testimonial-author">
                        <div class="author-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div>
                            <h4>Michael Chen</h4>
                            <span>Son of Client</span>
                        </div>
                    </div>
                </div>
                <div class="testimonial-card">
                    <div class="rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                    <p class="testimonial-text">"Professional, reliable, and compassionate. Equacare exceeded our expectations. My grandmother looks forward to her caregiver's visits every day."</p>
                    <div class="testimonial-author">
                        <div class="author-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div>
                            <h4>Emily Rodriguez</h4>
                            <span>Granddaughter of Client</span>
                        </div>
                    </div>
                </div>
            {% endif %}
        </div>
    </div>
</section>

<!-- Contact Form Section -->
<section class="contact-form-home">
    <div class="container">
        <div class="contact-form-header">
            <h2>Let Us Know What's On Your Mind</h2>
            <p>Request a no-obligation, in-home consultation</p>
        </div>
        <div class="home-contact-wrapper">
            <form id="homeContactForm" class="simple-contact-form">
                {% csrf_token %}
                <div class="form-row">
                    <div class="form-group">
                        <label for="home_name">Name:</label>
                        <input type="text" id="home_name" name="name" required>
                    </div>
                    <div class="form-group">
                        <label for="home_email">Email:</label>
                        <input type="email" id="home_email" name="email" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="home_phone">Phone:</label>
                        <input type="tel" id="home_phone" name="phone">
                    </div>
                    <div class="form-group">
                        <label for="home_subject">Subject:</label>
                        <select id="home_subject" name="subject" required>
                            <option value="">Select a subject</option>
                            <option value="Free Consultation">Request Free Consultation</option>
                            <option value="General Inquiry">General Inquiry</option>
                            <option value="Services Information">Services Information</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="home_message">Message:</label>
                    <textarea id="home_message" name="message" rows="4" required></textarea>
                </div>
                <button type="submit" class="btn btn-primary btn-block">
                    <span class="btn-text">Send Message</span>
                    <span class="btn-loading" style="display: none;">
                        <i class="fas fa-spinner fa-spin"></i> Sending...
                    </span>
                </button>
                <div id="homeFormMessage" class="form-message"></div>
            </form>
        </div>
    </div>
</section>

<!-- CTA Section -->
<section class="cta">
    <div class="container">
        <div class="cta-content">
            <h2>Ready to Talk?</h2>
            <p>It all starts with a conversation. Call us or send a message above.</p>
            <div class="cta-buttons">
                <a href="tel:+15155081556" class="btn btn-primary btn-lg"><i class="fas fa-phone"></i> Call Now: (515) 508-1556</a>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
// Home page contact form handler
document.addEventListener('DOMContentLoaded', function() {
    const homeContactForm = document.getElementById('homeContactForm');
    
    if (homeContactForm) {
        homeContactForm.addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const submitBtn = homeContactForm.querySelector('button[type="submit"]');
            const btnText = submitBtn.querySelector('.btn-text');
            const btnLoading = submitBtn.querySelector('.btn-loading');
            const formMessage = document.getElementById('homeFormMessage');
            
            // Show loading state
            submitBtn.disabled = true;
            btnText.style.display = 'none';
            btnLoading.style.display = 'inline-block';
            formMessage.textContent = '';
            formMessage.className = 'form-message';
            
            // Get form data
            const formData = new FormData(homeContactForm);
            const data = {
                name: formData.get('name'),
                email: formData.get('email'),
                phone: formData.get('phone'),
                subject: formData.get('subject'),
                message: formData.get('message'),
                csrfmiddlewaretoken: formData.get('csrfmiddlewaretoken')
            };
            
            try {
                const response = await fetch('{% url "website:submit_contact" %}', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-CSRFToken': data.csrfmiddlewaretoken
                    },
                    body: JSON.stringify(data)
                });
                
                const result = await response.json();
                
                if (result.success) {
                    formMessage.textContent = result.message;
                    formMessage.className = 'form-message success';
                    homeContactForm.reset();
                } else {
                    formMessage.textContent = result.message;
                    formMessage.className = 'form-message error';
                }
            } catch (error) {
                formMessage.textContent = 'An error occurred. Please try again or call us directly.';
                formMessage.className = 'form-message error';
            } finally {
                // Reset button state
                submitBtn.disabled = false;
                btnText.style.display = 'inline-block';
                btnLoading.style.display = 'none';
            }
        });
    }
});
</script>
{% endblock %}

